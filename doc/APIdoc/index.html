<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TLDNS Relay: TLDNS Relay</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TLDNS Relay<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Design a DNS relay server programme, read the ``domain name - IP address&#39;&#39; control table, when the client queries the IP address corresponding to the domain name, use the domain name to retrieve the control table, there may be three kinds of search results.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">TLDNS Relay </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
System Function Design</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Basic Tasks</h2>
<p>Design a DNS relay server program that reads a "Domain Name - IP Address" mapping table. When a client queries the IP address corresponding to a domain name, the domain name is searched in the table, resulting in three possible outcomes:</p>
<ul>
<li>If the result is an IP address <code>0.0.0.0</code>, return an error message "Domain name does not exist" to the client instead of returning the IP address <code>0.0.0.0</code>, implementing a malicious website blocking function.</li>
<li>If the result is a regular IP address, return this address to the client, implementing DNS server functionality.</li>
<li>If the domain name is not found in the table, send the query to an Internet DNS server and return the result to the client, implementing DNS relay functionality.</li>
</ul>
<p>The implementation must adhere to the DNS protocol specifications to ensure interoperability with Windows and other systems.</p>
<p>Notes:</p>
<ol type="1">
<li><b>Concurrent Clients</b>: Allow concurrent queries from multiple clients (which may be on different computers). This means processing another client's query request even if the first query has not been answered yet (the role of the ID field in the DNS protocol header), requiring message ID translation.</li>
<li><b>Timeout Handling</b>: Consider the unreliability of UDP, and handle situations where the external DNS server (relay) does not respond or responds late.</li>
</ol>
<h2><a class="anchor" id="autotoc_md3"></a>
Additional Functions</h2>
<ul>
<li>Implement LRU mechanism for Cache.</li>
<li>Optimize the dictionary lookup algorithm.</li>
<li>Ensure consistent performance across Windows/Linux source code.</li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
Extra Features</h2>
<ul>
<li>Support for IPv6.</li>
<li>Cross-platform support for Windows/Linux/MacOS.</li>
<li>Implement high-performance querying using an event-driven, non-blocking asynchronous I/O model.</li>
<li>Implement query pools and index pools to support concurrent queries.</li>
<li>Support multiple message types, including A, CNAME, SOA, MX, and AAAA.</li>
<li>Provide command-line argument parsing and help documentation.</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
Quick Start</h1>
<h2><a class="anchor" id="autotoc_md6"></a>
Quick Start</h2>
<ol type="1">
<li>Clone the repository locally and navigate into it: <div class="fragment"><div class="line">git clone https://github.com/Word2VecT/TLDNS-Relay.git</div>
<div class="line">cd TLDNS-Relay</div>
</div><!-- fragment --></li>
<li>Download and install <a href="https://dist.libuv.org/dist/">libuv</a>.</li>
<li>Import the project folder in CLion, compile, and run.</li>
<li>Set your DNS to <code>127.0.0.1</code>.</li>
<li>Enjoy!</li>
</ol>
<h2><a class="anchor" id="autotoc_md7"></a>
Program Help</h2>
<p>Use the <code>-h</code> parameter to view the program help documentation. </p><div class="fragment"><div class="line">Usage:</div>
<div class="line">[-a] Use the specified name server</div>
<div class="line">[-d] Debug level mask, a 4-bit binary number, DEBUG, INFO, ERROR, FATAL in order</div>
<div class="line">[-f] Use the specified DNS hosts file</div>
<div class="line">[-l] Log information storage location</div>
<div class="line">[-p] Custom listening ports</div>
<div class="line">[-h] Helpful Information</div>
<div class="line"> </div>
<div class="line">Example:</div>
<div class="line">-d 1111 -a 192.168.0.1 -f c:\dns-table.txt</div>
<div class="line">Output all debugging information</div>
<div class="line">Use the specified name server 192.168.0.1</div>
<div class="line">Use the specified configuration file c:\dns-table.txt</div>
<div class="line"> </div>
<div class="line">-d 1101 -l /Users/Code -p 53</div>
<div class="line">Output DEBUG, INFO, and FATAL information</div>
<div class="line">Output debugging information to /Users/Code as a file</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md8"></a>
Reference</h1>
<ul>
<li><a href="https://www.rfc-editor.org/info/rfc1034">Domain names - concepts and facilities</a>. RFC 1034, RFC Editor, November 1987, DOI: 10.17487/RFC1034. 55 pages. Abstract: This RFC is the revised basic definition of The Domain Name System. It obsoletes RFC-882. This memo describes the domain style names and their use for host address look up and electronic mail forwarding. It discusses the clients and servers in the domain name system and the protocol used between them.</li>
<li><a href="https://www.rfc-editor.org/info/rfc1035">Domain names - implementation and specification</a>. RFC 1035, RFC Editor, November 1987, DOI: 10.17487/RFC1035. 55 pages. Abstract: This RFC is the revised specification of the protocol and format used in the implementation of the Domain Name System. It obsoletes RFC-883. This memo documents the details of the domain name client-server communication.</li>
<li>Stroustrup, Bjarne. <em>The C++ Programming Language</em>. Pearson Education, 2013.</li>
<li>Wikipedia. <a href="http://zh.wikipedia.org/w/index.php?title=%E7%BA%A2%E9%BB%91%E6%A0%91&amp;oldid=81848547">红黑树 &mdash; Wikipedia, The Free Encyclopedia</a>. [Online; accessed 01-July-2024]. </li>
</ul>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
