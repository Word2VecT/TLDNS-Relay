<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TLDNS Relay: include/index_pool.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TLDNS Relay<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Design a DNS relay server programme, read the ``domain name - IP address&#39;&#39; control table, when the client queries the IP address corresponding to the domain name, use the domain name to retrieve the control table, there may be three kinds of search results.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index__pool_8h_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">index_pool.h</div></div>
</div><!--header-->
<div class="contents">
<a href="index__pool_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#ifndef DNSR_INDEX_POOL_H</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="preprocessor">#define DNSR_INDEX_POOL_H</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span> </div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span> </div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &quot;<a class="code" href="queue_8h.html">queue.h</a>&quot;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno"><a class="line" href="index__pool_8h.html#ab4978b587ed2e3aec43e5b1a94d650a8">    8</a></span><span class="preprocessor">#define INDEX_POOL_MAX_SIZE 65535</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span> </div>
<div class="foldopen" id="foldopen00011" data-start="{" data-end="};">
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno"><a class="line" href="structindex__.html">   11</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="structindex__.html">index_</a></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span>{</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno"><a class="line" href="structindex__.html#a2ed87ec15fc869a076b16468d9121095">   13</a></span>    uint16_t <a class="code hl_variable" href="structindex__.html#a2ed87ec15fc869a076b16468d9121095">id</a>; </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno"><a class="line" href="structindex__.html#a1f74bc47dccba4976cd83a08b76562f9">   14</a></span>    uint16_t <a class="code hl_variable" href="structindex__.html#a1f74bc47dccba4976cd83a08b76562f9">prev_id</a>; </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno"><a class="line" href="index__pool_8h.html#acacb8bfe1719d7d63449974fd7d8c01f">   15</a></span>} <a class="code hl_typedef" href="index__pool_8h.html#acacb8bfe1719d7d63449974fd7d8c01f">Index</a>;</div>
</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="foldopen" id="foldopen00018" data-start="{" data-end="};">
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno"><a class="line" href="structindex__pool.html">   18</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="structindex__pool.html">index_pool</a></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>{</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno"><a class="line" href="structindex__pool.html#a4c348dc48fe75dbd585f6b06f2c80488">   20</a></span>    <a class="code hl_struct" href="structindex__.html">Index</a> * <a class="code hl_variable" href="structindex__pool.html#a4c348dc48fe75dbd585f6b06f2c80488">pool</a>[<a class="code hl_define" href="index__pool_8h.html#ab4978b587ed2e3aec43e5b1a94d650a8">INDEX_POOL_MAX_SIZE</a>]; </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno"><a class="line" href="structindex__pool.html#a111772daaaddcee8e655c9bb6a7ec111">   21</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code hl_variable" href="structindex__pool.html#a111772daaaddcee8e655c9bb6a7ec111">count</a>; </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno"><a class="line" href="structindex__pool.html#a510933fa8aeeafb6cd8dedc0a5304302">   22</a></span>    <a class="code hl_struct" href="structqueue.html">Queue</a> * <a class="code hl_variable" href="structindex__pool.html#a510933fa8aeeafb6cd8dedc0a5304302">queue</a>; </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno"><a class="line" href="structindex__pool.html#abe14a3acfbe0139b82824973ed37bc4a">   29</a></span>    bool (* <a class="code hl_variable" href="structindex__pool.html#abe14a3acfbe0139b82824973ed37bc4a">full</a>)(<span class="keyword">struct </span><a class="code hl_struct" href="structindex__pool.html">index_pool</a> * ipool);</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno"><a class="line" href="structindex__pool.html#ae7416f2d0cf3179a08d6b77ca5294f41">   37</a></span>    uint16_t (* <a class="code hl_variable" href="structindex__pool.html#ae7416f2d0cf3179a08d6b77ca5294f41">insert</a>)(<span class="keyword">struct </span><a class="code hl_struct" href="structindex__pool.html">index_pool</a> * ipool, <a class="code hl_struct" href="structindex__.html">Index</a> * req);</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="structindex__pool.html#a85d5460293658354e5310f67e80a7d45">   45</a></span>    bool (* <a class="code hl_variable" href="structindex__pool.html#a85d5460293658354e5310f67e80a7d45">query</a>)(<span class="keyword">struct </span><a class="code hl_struct" href="structindex__pool.html">index_pool</a> * ipool, uint16_t index);</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno"><a class="line" href="structindex__pool.html#a39a0a6cb391a1ee27c43a8485107a645">   53</a></span>    <a class="code hl_struct" href="structindex__.html">Index</a> * (* delete)(<span class="keyword">struct </span><a class="code hl_struct" href="structindex__pool.html">index_pool</a> * ipool, uint16_t index);</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno"><a class="line" href="structindex__pool.html#abae05eee7fe94f0fb115992012c39c24">   59</a></span>    void (* <a class="code hl_variable" href="structindex__pool.html#abae05eee7fe94f0fb115992012c39c24">destroy</a>)(<span class="keyword">struct </span><a class="code hl_struct" href="structindex__pool.html">index_pool</a> * ipool);</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="index__pool_8h.html#ab81c1ac5334273e44196a19a27a2bf20">   60</a></span>} <a class="code hl_typedef" href="index__pool_8h.html#ab81c1ac5334273e44196a19a27a2bf20">Index_Pool</a>;</div>
</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><a class="code hl_struct" href="structindex__pool.html">Index_Pool</a> * <a class="code hl_function" href="index__pool_8h.html#a2a5451cc4036a0df832b3dcf990e96e6">new_ipool</a>();</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="preprocessor">#endif </span><span class="comment">//DNSR_INDEX_POOL_H</span></div>
<div class="ttc" id="aindex__pool_8h_html_a2a5451cc4036a0df832b3dcf990e96e6"><div class="ttname"><a href="index__pool_8h.html#a2a5451cc4036a0df832b3dcf990e96e6">new_ipool</a></div><div class="ttdeci">Index_Pool * new_ipool()</div><div class="ttdoc">Create a new index pool.</div><div class="ttdef"><b>Definition</b> index_pool.c:66</div></div>
<div class="ttc" id="aindex__pool_8h_html_ab4978b587ed2e3aec43e5b1a94d650a8"><div class="ttname"><a href="index__pool_8h.html#ab4978b587ed2e3aec43e5b1a94d650a8">INDEX_POOL_MAX_SIZE</a></div><div class="ttdeci">#define INDEX_POOL_MAX_SIZE</div><div class="ttdef"><b>Definition</b> index_pool.h:8</div></div>
<div class="ttc" id="aindex__pool_8h_html_ab81c1ac5334273e44196a19a27a2bf20"><div class="ttname"><a href="index__pool_8h.html#ab81c1ac5334273e44196a19a27a2bf20">Index_Pool</a></div><div class="ttdeci">struct index_pool Index_Pool</div><div class="ttdoc">Index pool.</div></div>
<div class="ttc" id="aindex__pool_8h_html_acacb8bfe1719d7d63449974fd7d8c01f"><div class="ttname"><a href="index__pool_8h.html#acacb8bfe1719d7d63449974fd7d8c01f">Index</a></div><div class="ttdeci">struct index_ Index</div><div class="ttdoc">Index structure.</div></div>
<div class="ttc" id="aqueue_8h_html"><div class="ttname"><a href="queue_8h.html">queue.h</a></div></div>
<div class="ttc" id="astructindex___html"><div class="ttname"><a href="structindex__.html">index_</a></div><div class="ttdoc">Index structure.</div><div class="ttdef"><b>Definition</b> index_pool.h:12</div></div>
<div class="ttc" id="astructindex___html_a1f74bc47dccba4976cd83a08b76562f9"><div class="ttname"><a href="structindex__.html#a1f74bc47dccba4976cd83a08b76562f9">index_::prev_id</a></div><div class="ttdeci">uint16_t prev_id</div><div class="ttdoc">The corresponding query ID.</div><div class="ttdef"><b>Definition</b> index_pool.h:14</div></div>
<div class="ttc" id="astructindex___html_a2ed87ec15fc869a076b16468d9121095"><div class="ttname"><a href="structindex__.html#a2ed87ec15fc869a076b16468d9121095">index_::id</a></div><div class="ttdeci">uint16_t id</div><div class="ttdoc">The ID of the sent DNS query message.</div><div class="ttdef"><b>Definition</b> index_pool.h:13</div></div>
<div class="ttc" id="astructindex__pool_html"><div class="ttname"><a href="structindex__pool.html">index_pool</a></div><div class="ttdoc">Index pool.</div><div class="ttdef"><b>Definition</b> index_pool.h:19</div></div>
<div class="ttc" id="astructindex__pool_html_a111772daaaddcee8e655c9bb6a7ec111"><div class="ttname"><a href="structindex__pool.html#a111772daaaddcee8e655c9bb6a7ec111">index_pool::count</a></div><div class="ttdeci">unsigned short count</div><div class="ttdoc">Number of indices in the pool.</div><div class="ttdef"><b>Definition</b> index_pool.h:21</div></div>
<div class="ttc" id="astructindex__pool_html_a4c348dc48fe75dbd585f6b06f2c80488"><div class="ttname"><a href="structindex__pool.html#a4c348dc48fe75dbd585f6b06f2c80488">index_pool::pool</a></div><div class="ttdeci">Index * pool[INDEX_POOL_MAX_SIZE]</div><div class="ttdoc">Index pool.</div><div class="ttdef"><b>Definition</b> index_pool.h:20</div></div>
<div class="ttc" id="astructindex__pool_html_a510933fa8aeeafb6cd8dedc0a5304302"><div class="ttname"><a href="structindex__pool.html#a510933fa8aeeafb6cd8dedc0a5304302">index_pool::queue</a></div><div class="ttdeci">Queue * queue</div><div class="ttdoc">Queue of unallocated indices.</div><div class="ttdef"><b>Definition</b> index_pool.h:22</div></div>
<div class="ttc" id="astructindex__pool_html_a85d5460293658354e5310f67e80a7d45"><div class="ttname"><a href="structindex__pool.html#a85d5460293658354e5310f67e80a7d45">index_pool::query</a></div><div class="ttdeci">bool(* query)(struct index_pool *ipool, uint16_t index)</div><div class="ttdoc">Query if an index exists in the pool.</div><div class="ttdef"><b>Definition</b> index_pool.h:45</div></div>
<div class="ttc" id="astructindex__pool_html_abae05eee7fe94f0fb115992012c39c24"><div class="ttname"><a href="structindex__pool.html#abae05eee7fe94f0fb115992012c39c24">index_pool::destroy</a></div><div class="ttdeci">void(* destroy)(struct index_pool *ipool)</div><div class="ttdoc">Destroy the index pool.</div><div class="ttdef"><b>Definition</b> index_pool.h:59</div></div>
<div class="ttc" id="astructindex__pool_html_abe14a3acfbe0139b82824973ed37bc4a"><div class="ttname"><a href="structindex__pool.html#abe14a3acfbe0139b82824973ed37bc4a">index_pool::full</a></div><div class="ttdeci">bool(* full)(struct index_pool *ipool)</div><div class="ttdoc">Check if the index pool is full.</div><div class="ttdef"><b>Definition</b> index_pool.h:29</div></div>
<div class="ttc" id="astructindex__pool_html_ae7416f2d0cf3179a08d6b77ca5294f41"><div class="ttname"><a href="structindex__pool.html#ae7416f2d0cf3179a08d6b77ca5294f41">index_pool::insert</a></div><div class="ttdeci">uint16_t(* insert)(struct index_pool *ipool, Index *req)</div><div class="ttdoc">Insert an index into the pool.</div><div class="ttdef"><b>Definition</b> index_pool.h:37</div></div>
<div class="ttc" id="astructqueue_html"><div class="ttname"><a href="structqueue.html">queue</a></div><div class="ttdoc">Circular queue.</div><div class="ttdef"><b>Definition</b> queue.h:10</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="index__pool_8h.html">index_pool.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
